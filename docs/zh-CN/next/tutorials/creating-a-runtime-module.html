<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>创建 Runtime 模块 · Substrate Developer Hub (@5517ab14)</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;In this tutorial, you&#x27;ll write a Substrate runtime module that lives in its own crate, and include it in a node based on the &lt;code&gt;substrate-node-template&lt;/code&gt;.&lt;/p&gt;
"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="创建 Runtime 模块 · Substrate Developer Hub (@5517ab14)"/><meta property="og:type" content="website"/><meta property="og:url" content="https://substrate-developer-hub.github.io//"/><meta property="og:description" content="&lt;p&gt;In this tutorial, you&#x27;ll write a Substrate runtime module that lives in its own crate, and include it in a node based on the &lt;code&gt;substrate-node-template&lt;/code&gt;.&lt;/p&gt;
"/><meta property="og:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/load.js"></script><script type="text/javascript" src="/js/config.js" defer=""></script><script type="text/javascript" src="/js/klaro.min.js" defer=""></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-CN"><img class="logo" src="/img/Substrate-logo.svg" alt="Substrate Developer Hub (@5517ab14)"/><h2 class="headerTitleWithLogo">Substrate Developer Hub (@5517ab14)</h2></a><a href="/zh-CN/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/zh-CN/docs" target="_self">文档</a></li><li class=""><a href="/recipes/" target="_self">Recipes</a></li><li class=""><a href="/zh-CN/tutorials" target="_self">教程</a></li><li class=""><a href="/zh-CN/community" target="_self">社区</a></li><li class=""><a href="https://github.com/paritytech/substrate" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/next/tutorials/creating-a-runtime-module">English</a></li><li><a href="/docs/ru/next/tutorials/creating-a-runtime-module">Русский</a></li><li><a href="https://crowdin.com/project/substrate-developer-hub" target="_blank" rel="noreferrer noopener">参与翻译</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/substrate-developer-hub/zh-CN" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">创建 Runtime 模块</h1></header><article><div><span><p>In this tutorial, you'll write a Substrate runtime module that lives in its own crate, and include it in a node based on the <code>substrate-node-template</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="prerequisites"></a><a href="#prerequisites" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites</h2>
<p>If you haven't already done so, follow the <a href="/docs/zh-CN/next/getting-started">Getting Started</a> guide to download necessary tools to build Substrate.</p>
<h3><a class="anchor" aria-hidden="true" id="clone-the-node-and-module-template"></a><a href="#clone-the-node-and-module-template" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Clone the Node and Module Template</h3>
<p>We're not going to write our module directly as part of the node template, but rather as a separate Rust crate. This approach allows us to publish our module separate from our node and also allows other to easily import this module into their own Substrate runtime.</p>
<ol>
<li><p>Clone the Substrate node template:</p>
<pre><code class="hljs css language-bash"><span class="token function">git</span> clone https://github.com/substrate-developer-hub/substrate-node-template.git my-node
</code></pre></li>
<li><p>Clone the Substrate module template:</p>
<pre><code class="hljs css language-bash"><span class="token function">git</span> clone https://github.com/substrate-developer-hub/substrate-module-template.git my-module
</code></pre></li>
<li><p>Build the Substrate node template:</p>
<pre><code class="hljs css language-bash"><span class="token function">cd</span> my-node
cargo build --release
</code></pre></li>
</ol>
<p>The <code>substrate-node-template</code> contains a working Substrate node, and the <code>substrate-module-template</code> contains an independent Rust crate which is a Substrate runtime module that can be included in your node. The compilation of the node may take up to 30 minutes depending on your hardware, so let that run while you continue to follow this guide.</p>
<p>If you aren't familiar with Rust including and using other modules, you can refer to <a href="https://doc.rust-lang.org/cargo/guide/creating-a-new-project.html">the Cargo book</a> for a more in-depth explanation.</p>
<h2><a class="anchor" aria-hidden="true" id="the-substrate-module-template"></a><a href="#the-substrate-module-template" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Substrate Module Template</h2>
<p>You should be able to successfully compile the Substrate module template with:</p>
<pre><code class="hljs css language-bash"><span class="token function">cd</span> my-module
cargo build --release
</code></pre>
<p>Let's explore the Substrate module template, starting with the <code>Cargo.toml</code> file.</p>
<h3><a class="anchor" aria-hidden="true" id="renaming-your-crate"></a><a href="#renaming-your-crate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Renaming Your Crate</h3>
<p>In the <code>Cargo.toml</code> file, you can update the crate's name and authorship. In this tutorial, we're focusing on how to create and use the module rather than writing interesting module logic. So let's call it <code>test_module</code>.</p>
<p>The beginning of the <code>Cargo.toml</code> now looks like:</p>
<p><strong><code>my-module/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-toml"><span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">"test_module"</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.1.0"</span>
<span class="token key property">authors</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token table class-name">"Your Name"</span><span class="token punctuation">]</span>
<span class="token key property">edition</span> <span class="token punctuation">=</span> <span class="token string">"2018"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="your-module-s-std-feature"></a><a href="#your-module-s-std-feature" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Your Module's <code>std</code> Feature</h3>
<p>In your <code>my-module/Cargo.toml</code> file, you will notice a few lines about the &quot;<code>std</code> feature&quot;. In Rust, when you enable <code>std</code>, you give your project access to <a href="https://doc.rust-lang.org/std/">the Rust standard libraries</a>. This works just fine when building native binaries.</p>
<p>However, Substrate also builds the runtime code to WebAssembly (Wasm). In this case we use cargo features to disable the Rust standard library. Thus, all the dependencies we use for our module, and our entire runtime, must be able to compile with <a href="https://rust-embedded.github.io/book/intro/no-std.html"><code>no_std</code></a> feature. Our <code>Cargo.toml</code> file tells our module's dependencies to only use their <code>std</code> feature when this module also uses its <code>std</code> feature, like so:</p>
<p><strong><code>my-module/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML">[features]
default = ['std']
std = [
    'serde',
    'codec/std',
    'support/std',
    'system/std',
    'sr-primitives/std',
    'runtime-io/std',
]
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="consistent-substrate-dependencies"></a><a href="#consistent-substrate-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Consistent Substrate Dependencies</h3>
<p>All Substrate modules will depend on some low-level module libraries such as <code>srml-system</code> and <code>srml-support</code>. These libraries are pulled from the main <a href="https://github.com/paritytech/substrate">Substrate GitHub repository</a>. When people build their own Substrate nodes, they will also have dependencies on the main Substrate repository.</p>
<p>Because of this, you will need to be careful to ensure consistent dependencies from your module and the node integrating your module to the Substrate repository. If your module is dependent on one version of Substrate, and the node on another, compilation will run into errors where the Substrate versions may be incompatible, or different version of the same library are being used. Ultimately Cargo will not be able to resolve those conflicts and you will get a compile time error.</p>
<p>When building your module, we recommend to develop against the <code>v2.0</code> branch as the template demonstrates. This ensures your module has the latest stable code. If you later prefer to have the freshly-baked features from Substrate, you can then choose to use a specific git commit of Substrate, as shown in the following code comment.</p>
<p><strong><code>my-module/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-comment"># --snip--</span>
<span class="hljs-section">
[dependencies.support]</span>
<span class="hljs-attr">default_features</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">git</span> = <span class="hljs-string">'https://github.com/paritytech/substrate.git'</span>
<span class="hljs-attr">package</span> = <span class="hljs-string">'srml-support'</span>
<span class="hljs-attr">branch</span> = <span class="hljs-string">'v2.0'</span>

<span class="hljs-comment"># Develop against a git commit by specifying the same Substrate commit as your main node. </span>
<span class="hljs-comment"># It is important to use the same Substrate commit to prevent dependencies mismatch.</span>
<span class="hljs-comment"># rev = "&lt;some commit hash&gt;"</span>

<span class="hljs-comment"># --snip--</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="your-module-s-dev-dependencies"></a><a href="#your-module-s-dev-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Your Module's Dev Dependencies</h3>
<p>The final section of the <code>Cargo.toml</code> file specifies the dev dependencies. These are the dependencies that are needed in your module's tests, but not necessary the actual module itself.</p>
<p><strong><code>my-module/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-comment"># --snip--</span>
<span class="hljs-section">
[dev-dependencies.primitives]</span>
<span class="hljs-attr">git</span> = <span class="hljs-string">'https://github.com/paritytech/substrate.git'</span>
<span class="hljs-attr">package</span> = <span class="hljs-string">'substrate-primitives'</span>
<span class="hljs-attr">branch</span> = <span class="hljs-string">'v2.0'</span>
</code></pre>
<p>You can confirm that the tests in the Substrate module template pass with:</p>
<pre><code class="hljs css language-bash">cargo <span class="token function">test</span>
</code></pre>
<p>You may need to modify the dependencies you need for the modules you create.</p>
<h2><a class="anchor" aria-hidden="true" id="add-your-runtime-module-to-your-node"></a><a href="#add-your-runtime-module-to-your-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add Your Runtime Module to Your Node</h2>
<p>With our runtime module now compiling and passing it's tests, we're ready to add it to our node.</p>
<p>We first add our newly-created crate as a dependency in the node's runtime <code>Cargo.toml</code>. Then we tell the module to only build its <code>std</code> feature when the runtime itself does, as follows:</p>
<p><strong><code>my-node/runtime/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"># --snip--

[dependencies.test_module]
default_features = false
path = "../../my-module"

# toward the bottom
[features]
default = ['std']
std = [
    'test_module/std',
    # --snip--
]
</code></pre>
<blockquote>
<p>You <strong>must</strong> set <code>default_features = false</code> so that your runtime will successfully compile to Wasm.</p>
</blockquote>
<p>Next we will update <code>my-node/runtime/src/lib.rs</code> to actually use our new runtime module, by adding a trait implementation with our <code>test_module</code> and add it in our <code>construct_runtime!</code> macro.</p>
<p><strong><code>my-node/runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token comment">// add the following code block</span>
<span class="token keyword">impl</span> test_module<span class="token punctuation">:</span><span class="token punctuation">:</span>Trait <span class="token keyword">for</span> Runtime <span class="token punctuation">{</span>
  <span class="token keyword">type</span> Event <span class="token operator">=</span> Event<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// --snip--</span>
<span class="token function">construct_runtime!</span><span class="token punctuation">(</span>
  <span class="token keyword">pub</span> <span class="token keyword">enum</span> Runtime <span class="token keyword">where</span>
    Block <span class="token operator">=</span> Block<span class="token punctuation">,</span>
    NodeBlock <span class="token operator">=</span> opaque<span class="token punctuation">:</span><span class="token punctuation">:</span>Block<span class="token punctuation">,</span>
    UncheckedExtrinsic <span class="token operator">=</span> UncheckedExtrinsic
  <span class="token punctuation">{</span>
    <span class="token comment">// --snip--</span>
    <span class="token comment">// add the following line</span>
    TestModule<span class="token punctuation">:</span> test_module<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">{</span>Module<span class="token punctuation">,</span> Call<span class="token punctuation">,</span> Storage<span class="token punctuation">,</span> Event<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="run-your-node"></a><a href="#run-your-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Run Your Node</h2>
<p>At this point you have the module packaged up as it's own crate and included in your node's runtime.</p>
<ol>
<li><p>Compile and run your node with:</p>
<pre><code class="hljs css language-bash"><span class="token function">cd</span> my-node
cargo build --release
</code></pre></li>
<li><p>Purge any existing dev chain (Enter <code>y</code> on prompt):</p>
<pre><code class="hljs css language-bash">./target/release/node-template purge-chain --dev
</code></pre></li>
<li><p>Start your node:</p>
<pre><code class="hljs css language-bash">./target/release/node-template --dev
</code></pre></li>
</ol>
<p>Finally, start the <a href="https://polkadot.js.org/apps/#/explorer?rpc=ws://127.0.0.1:9944">Polkadot-JS Apps connecting to your local node</a> to confirm that the module is working as expected.</p>
<blockquote>
<p><strong>Notes:</strong> You can also manually set the node URL in Polkadot-JS Apps by navigating to the <strong>Settings</strong> tab, and have the <strong>remote node/endpoint to connect to</strong> set to <strong>Local Node</strong>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="publish-your-module"></a><a href="#publish-your-module" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Publish Your Module</h2>
<p>Once your module is no longer just testing code, you should consider publishing it to GitHub. Go ahead and <a href="https://help.github.com/en/articles/create-a-repo">create a GitHub repository</a> and <a href="https://help.github.com/en/articles/pushing-to-a-remote">push your module's code</a> to it.</p>
<p>With the code on GitHub, your module is properly published. 恭喜你！ Now we just need to update your node to use the code that is on GitHub instead of a hard-coded file system path. The final edit to your runtime's <code>Cargo.toml</code> file is to update its dependency on your module. The new code is:</p>
<p><strong><code>my-node/runtime/Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-section">[dependencies.your-module-name]</span>
<span class="hljs-attr">default_features</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">git</span> = <span class="hljs-string">"https://github.com/your-username/your-module"</span>
<span class="hljs-attr">branch</span> = <span class="hljs-string">"master"</span>

<span class="hljs-comment"># You may choose a specific commit or tag instead of branch</span>
<span class="hljs-comment"># rev = "&lt;some commit hash&gt;"</span>
<span class="hljs-comment"># tag = "&lt;some tag&gt;"</span>
</code></pre>
<p>Compile one more time and notice that Cargo now grabs your module from GitHub instead of using the local files.</p>
<h2><a class="anchor" aria-hidden="true" id="后续步骤"></a><a href="#后续步骤" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>后续步骤</h2>
<p>恭喜你！ You've written a Substrate runtime module in its own Rust crate, and published that crate to GitHub. Other blockchain developers can now easily use your module in their runtime by simply including those same four lines of code in their runtime's <code>Cargo.toml</code> files and updating their runtime's <code>lib.rs</code> file.</p>
<p>If you're not sure what to do next, check out the resources below.</p>
<h3><a class="anchor" aria-hidden="true" id="learn-more"></a><a href="#learn-more" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Learn More</h3>
<ul>
<li>We have <a href="https://substrate.dev/en/tutorials">plenty of tutorials</a> to showcase Substrate development concepts and techniques.</li>
<li>To learn more about writing your own runtime with a front end, we have a <a href="https://substrate.dev/substrate-collectables-workshop">Substrate Collectables Workshop</a> for building an end-to-end application.</li>
<li>For more information about runtime development tips and patterns, refer to our <a href="https://substrate.dev/recipes/">Substrate Recipes</a>.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h3>
<ul>
<li>Tutorial on <a href="tutorials/adding-a-module-to-your-runtime">adding a <code>Contracts</code> module into runtime</a>, so your node can run smart contract.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="references"></a><a href="#references" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References</h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/cargo/">The Cargo book</a></li>
<li>More about <a href="https://rustwasm.github.io/">Rust and WebAssembly</a></li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#prerequisites">Prerequisites</a><ul class="toc-headings"><li><a href="#clone-the-node-and-module-template">Clone the Node and Module Template</a></li></ul></li><li><a href="#the-substrate-module-template">The Substrate Module Template</a><ul class="toc-headings"><li><a href="#renaming-your-crate">Renaming Your Crate</a></li><li><a href="#your-module-s-std-feature">Your Module's <code>std</code> Feature</a></li><li><a href="#consistent-substrate-dependencies">Consistent Substrate Dependencies</a></li><li><a href="#your-module-s-dev-dependencies">Your Module's Dev Dependencies</a></li></ul></li><li><a href="#add-your-runtime-module-to-your-node">Add Your Runtime Module to Your Node</a></li><li><a href="#run-your-node">Run Your Node</a></li><li><a href="#publish-your-module">Publish Your Module</a></li><li><a href="#后续步骤">后续步骤</a><ul class="toc-headings"><li><a href="#learn-more">Learn More</a></li><li><a href="#examples">Examples</a></li><li><a href="#references">References</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><div><style>
#blast {
  position: fixed;
  width: 100%;
  bottom: 0;
  height: 50px;
  background-image: url(/img/bg-sub01.svg); background-size: cover; background-position: right 0px bottom 500px;;
  color: #18FFB2;
  z-index: 99999;
  text-align: center;
  background-color: #000028;
  transition: background-color 0.2s;
}
#blast:hover {
  background-color: #E91E63;
}

#blast h2 {
  margin: 0;
  line-height: 50px;
}

#blast a {
  display: block;
  color: #18FFB2;
  text-decoration: underline;
  mix-blend-mode: lighten;
}

#blast img {
  max-height: 50px;
}

body {
  margin-bottom: 50px;
}
</style><section id="blast"><a href="https://sub0.parity.io" target="_blank"><img src="/img/sub0-blast.png" class="img-fluid"/></a></section></div><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Substrate-logo.svg" alt="Substrate Developer Hub (@5517ab14)" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/zh-CN/getting-started">Getting Started</a><a href="/zh-CN/tutorials">Tutorials</a><a href="/rustdocs/v1.0/">Reference Docs</a><a href="/recipes/">Recipes</a></div><div><h5>Community</h5><a href="/zh-CN/videos">Videos</a><a href="/zh-CN/seminar">Substrate Seminar</a><a href="http://stackoverflow.com/questions/tagged/substrate" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://riot.im/app/#/room/!HzySYSaIhtyWrwiwEV:matrix.org">Riot Chat</a><a href="https://twitter.com/ParityTech" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.meetup.com/parity/" target="_blank" rel="noreferrer noopener">Events</a></div><div><h5>More</h5><a href="https://www.parity.io/blog/">Blog</a><a href="https://github.com/paritytech/substrate">Substrate GitHub</a><a href="https://github.com/substrate-developer-hub/">Developer Hub GitHub</a><a href="https://www.parity.io/privacy/">Privacy Policy</a><a href="#" id="cookie-settings">Cookie Settings<script>
              var cookieSettings = document.getElementById('cookie-settings');
              cookieSettings.onclick = function() {
                return klaro.show();
              };
              </script></a></div></section><section class="copyright">Copyright © 2019 Parity Technologies</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '5cd09916f4ba4c283b2d45ee7386fc34',
                indexName: 'substrate',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:zh-CN"]}
              });
            </script></body></html>