<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>在你的 Runtime 中添加模块 · Substrate Developer Hub (@5517ab14)</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;The &lt;a href=&quot;https://github.com/paritytech/substrate/tree/master/node-template&quot;&gt;Substrate node template&lt;/a&gt; provides a minimal working runtime which you can use to quickly get started building your own custom blockchain. However, in the attempts to remain minimal, it does not include most of the modules in the Substrate runtime module library (&lt;a href=&quot;/docs/zh-CN/next/overview/glossary#srml-substrate-runtime-module-library&quot;&gt;SRML&lt;/a&gt;).&lt;/p&gt;
"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="在你的 Runtime 中添加模块 · Substrate Developer Hub (@5517ab14)"/><meta property="og:type" content="website"/><meta property="og:url" content="https://substrate-developer-hub.github.io//"/><meta property="og:description" content="&lt;p&gt;The &lt;a href=&quot;https://github.com/paritytech/substrate/tree/master/node-template&quot;&gt;Substrate node template&lt;/a&gt; provides a minimal working runtime which you can use to quickly get started building your own custom blockchain. However, in the attempts to remain minimal, it does not include most of the modules in the Substrate runtime module library (&lt;a href=&quot;/docs/zh-CN/next/overview/glossary#srml-substrate-runtime-module-library&quot;&gt;SRML&lt;/a&gt;).&lt;/p&gt;
"/><meta property="og:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/load.js"></script><script type="text/javascript" src="/js/config.js" defer=""></script><script type="text/javascript" src="/js/klaro.min.js" defer=""></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-CN"><img class="logo" src="/img/Substrate-logo.svg" alt="Substrate Developer Hub (@5517ab14)"/><h2 class="headerTitleWithLogo">Substrate Developer Hub (@5517ab14)</h2></a><a href="/zh-CN/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/zh-CN/docs" target="_self">文档</a></li><li class=""><a href="/recipes/" target="_self">Recipes</a></li><li class=""><a href="/zh-CN/tutorials" target="_self">教程</a></li><li class=""><a href="/zh-CN/community" target="_self">社区</a></li><li class=""><a href="https://github.com/paritytech/substrate" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/next/tutorials/adding-a-module-to-your-runtime">English</a></li><li><a href="/docs/ru/next/tutorials/adding-a-module-to-your-runtime">Русский</a></li><li><a href="https://crowdin.com/project/substrate-developer-hub" target="_blank" rel="noreferrer noopener">参与翻译</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/substrate-developer-hub/zh-CN" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">在你的 Runtime 中添加模块</h1></header><article><div><span><p>The <a href="https://github.com/paritytech/substrate/tree/master/node-template">Substrate node template</a> provides a minimal working runtime which you can use to quickly get started building your own custom blockchain. However, in the attempts to remain minimal, it does not include most of the modules in the Substrate runtime module library (<a href="/docs/zh-CN/next/overview/glossary#srml-substrate-runtime-module-library">SRML</a>).</p>
<p>This guide will show you how you can add the <a href="https://substrate.dev/rustdocs/master/srml_contracts/index.html">Contracts module</a> to your runtime in order to allow your blockchain to support Wasm smart contracts. You can follow similar patterns to add additional modules from the SRML to your runtime, however you should note that each module can be a little different in terms of the specific settings needed to import and use it correctly.</p>
<h2><a class="anchor" aria-hidden="true" id="prerequisites"></a><a href="#prerequisites" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites</h2>
<p>Before you can follow this guide, you need to make sure that your computer is set up to work with and build Substrate.</p>
<p>To install all the prerequisites needed for the Substrate build environment, like Rust, you can run:</p>
<pre><code class="hljs css language-bash"><span class="token function">curl</span> https://getsubstrate.io -sSf <span class="token operator">|</span> <span class="token function">bash</span> -s -- --fast
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="get-the-node-template"></a><a href="#get-the-node-template" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Get the Node Template</h4>
<pre><code class="hljs css language-bash"><span class="token function">git</span> clone https://github.com/substrate-developer-hub/substrate-node-template

<span class="token comment"># Personalize your project</span>
./substrate-node-template/substrate-node-rename.sh contracts-chain <span class="token operator">&lt;</span>YourName<span class="token operator">></span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="run-your-node"></a><a href="#run-your-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Run your node.</h4>
<p>It will take a little while for Rust to build your node, but once it is complete, you should be able to start your node with:</p>
<pre><code class="hljs css language-bash"><span class="token function">cd</span> contracts-chain/
cargo run --release -- --dev
</code></pre>
<p>If you have gotten this far, then you are ready to start adding the new module to your runtime.</p>
<p>Remember to stop your node with <code>control + C</code>!</p>
<h2><a class="anchor" aria-hidden="true" id="importing-a-module-crate"></a><a href="#importing-a-module-crate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Importing a Module Crate</h2>
<p>The first thing you need to do to add the Contracts module is to import the <code>srml_contracts</code> crate in your runtime's <code>Cargo.toml</code> file. If you want a proper primer into Cargo References, you should check out <a href="https://doc.rust-lang.org/cargo/reference/index.html">their official documentation</a>.</p>
<p>Open <code>contracts-chain/runtime/Cargo.toml</code> and you will see a file which lists all the dependencies your runtime has. For example, it depends on the <a href="https://substrate.dev/rustdocs/master/srml_balances/index.html">Balances module</a>:</p>
<p><strong><code>Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-section">[dependencies.balances]</span>
<span class="hljs-attr">default_features</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">git</span> = <span class="hljs-string">'https://github.com/paritytech/substrate.git'</span>
<span class="hljs-attr">package</span> = <span class="hljs-string">'srml-balances'</span>
<span class="hljs-attr">rev</span> = <span class="hljs-string">'&lt;git-commit&gt;'</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="crate-features"></a><a href="#crate-features" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crate Features</h3>
<p>One important thing we need to call out with importing module crates is making sure to set up the crate <code>features</code> correctly. In the code snippet above, you will notice that we set <code>default_features = false</code>. If you explore the <code>Cargo.toml</code> file even closer, you will find something like:</p>
<p><strong><code>Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML">[features]
default = ['std']
std = [
    'codec/std',
    'client/std',
    'rstd/std',
    'runtime-io/std',
    'support/std',
    'balances/std',
    #--snip--
]
</code></pre>
<p>This second line defines the <code>default</code> features of your runtime crate as <code>std</code>. You can imagine, each module crate has a similar configuration defining the default feature for the crate. Your feature will determine the features that should be used on downstream dependencies. For example, the snippet above should be read as:</p>
<blockquote>
<p>The default feature for this Substrate runtime is <code>std</code>. When <code>std</code> feature is enabled for the runtime, <code>parity-scale-codec</code>, <code>primitives</code>, <code>client</code>, and all the other listed dependencies should use their <code>std</code> feature too.</p>
</blockquote>
<p>This is important to enable the Substrate runtime to compile to both native binaries (which support Rust <a href="https://doc.rust-lang.org/std/"><code>std</code></a>) and Wasm binaries (which do not: <a href="https://rust-embedded.github.io/book/intro/no-std.html"><code>no_std</code></a>).</p>
<p>To see how these features actually get used in the runtime code, we can open the project file:</p>
<p><strong><code>runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token comment">//! The Substrate Node Template runtime. This can be compiled with `#[no_std]`, ready for Wasm.</span>

<span class="token attribute attr-name">#![cfg_attr(not(feature = "std"), no_std)]</span>
<span class="token comment">// `construct_runtime!` does a lot of recursion and requires us to increase the limit to 256.</span>
<span class="token attribute attr-name">#![recursion_limit="256"]</span>

<span class="token comment">// Make the WASM binary available.</span>
<span class="token attribute attr-name">#[cfg(feature = "std")]</span>
<span class="token function">include!</span><span class="token punctuation">(</span><span class="token function">concat!</span><span class="token punctuation">(</span><span class="token function">env!</span><span class="token punctuation">(</span><span class="token string">"OUT_DIR"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"/wasm_binary.rs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> rstd<span class="token punctuation">:</span><span class="token punctuation">:</span>prelude<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token comment">//--snip--</span>

<span class="token comment">// A few exports that help ease life for downstream crates.</span>
<span class="token attribute attr-name">#[cfg(any(feature = "std", test))]</span>
<span class="token keyword">pub</span> <span class="token keyword">use</span> sr_primitives<span class="token punctuation">:</span><span class="token punctuation">:</span>BuildStorage<span class="token punctuation">;</span>
<span class="token keyword">pub</span> <span class="token keyword">use</span> balances<span class="token punctuation">:</span><span class="token punctuation">:</span>Call <span class="token keyword">as</span> BalancesCall<span class="token punctuation">;</span>
<span class="token comment">//--snip--</span>
</code></pre>
<p>You can see that at the top of the file, we define that we will use <code>no_std</code> when we are <em>not</em> using the <code>std</code> feature. A few lines lower you can see <code>#[cfg(feature = &quot;std&quot;)]</code> above the <code>wasm_binary.rs</code> import, which is a flag saying to only import the WASM binary when we have enabled the <code>std</code> feature.</p>
<h3><a class="anchor" aria-hidden="true" id="importing-the-contracts-module-crate"></a><a href="#importing-the-contracts-module-crate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Importing the Contracts Module Crate</h3>
<p>Okay, now that we have covered the basics of crate features, we can actually import the Contracts module. The Contracts module is probably the most complicated module in the SRML, so it makes for a good example of some of the trickiness that can be involved when adding additional modules. To give you a hint as to what is to come, you should take a look at the <a href="https://github.com/paritytech/substrate/blob/master/srml/contracts/Cargo.toml"><code>Cargo.toml</code> file for the Contracts module</a>.</p>
<p>First we will add the new dependency by simply copying an existing module, and changing the values. So based on the <code>balances</code> import shown above, my <code>contracts</code> import will look like:</p>
<p><strong><code>Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML"><span class="hljs-section">[dependencies.contracts]</span>
<span class="hljs-attr">default_features</span> = <span class="hljs-literal">false</span>
<span class="hljs-attr">git</span> = <span class="hljs-string">'https://github.com/paritytech/substrate.git'</span>
<span class="hljs-attr">package</span> = <span class="hljs-string">'srml-contracts'</span>
<span class="hljs-attr">rev</span> = <span class="hljs-string">'&lt;git-commit&gt;'</span> <span class="hljs-comment"># e.g. commit: '3dedd246c62255ba6f9b777ecba318dfc2078d85'</span>
</code></pre>
<p>You <a href="https://github.com/paritytech/substrate/blob/master/srml/contracts/Cargo.toml">can see</a> that the Contracts module has <code>std</code> feature, thus we need to add that feature to our runtime:</p>
<p><strong><code>Cargo.toml</code></strong></p>
<pre><code class="hljs css language-TOML">[features]
default = ["std"]
std = [
    'contracts/std',
    #--snip--
]
</code></pre>
<p>If you forget to set the feature, when building to your native binaries you will get errors like:</p>
<pre><code class="hljs css language-rust">error<span class="token punctuation">:</span> cannot find macro `<span class="token macro-rules function">vec!</span>` <span class="token keyword">in</span> this scope
   <span class="token operator">-</span><span class="token punctuation">-></span> ~<span class="token operator">/</span><span class="token punctuation">.</span>cargo<span class="token operator">/</span>git<span class="token operator">/</span>checkouts<span class="token operator">/</span>substrate<span class="token operator">-</span>7e08433d4c370a21<span class="token operator">/</span>783ca18<span class="token operator">/</span>core<span class="token operator">/</span>sr<span class="token operator">-</span>sandbox<span class="token operator">/</span>src<span class="token operator">/</span><span class="token punctuation">..</span><span class="token operator">/</span>without_std<span class="token punctuation">.</span>rs<span class="token punctuation">:</span><span class="token number">290</span><span class="token punctuation">:</span><span class="token number">24</span>
    <span class="token operator">|</span>
<span class="token number">290</span> <span class="token operator">|</span>         <span class="token keyword">let</span> <span class="token keyword">mut</span> return_val <span class="token operator">=</span> <span class="token function">vec!</span><span class="token punctuation">[</span><span class="token number">0u8</span><span class="token punctuation">;</span> sandbox_primitives<span class="token punctuation">:</span><span class="token punctuation">:</span>ReturnValue<span class="token punctuation">:</span><span class="token punctuation">:</span>ENCODED_MAX_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token operator">|</span>                              <span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span>

error<span class="token punctuation">:</span> aborting due to previous error
</code></pre>
<p>But since you did not forget, you should be able to sanity check that everything compiles correctly with:</p>
<pre><code class="hljs css language-bash">cargo run --release -- --dev
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="adding-the-contracts-module"></a><a href="#adding-the-contracts-module" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding the Contracts Module</h2>
<p>Now that we have successfully imported the Contracts module crate, we need to add it to our Runtime. The first thing we will add to our runtime is the Gas type.</p>
<p><strong><code>runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token comment">//! The Substrate Node Template runtime. This can be compiled with `#[no_std]`, ready for Wasm.</span>

<span class="token attribute attr-name">#![cfg_attr(not(feature = "std"), no_std)]</span>
<span class="token comment">// `construct_runtime!` does a lot of recursion and requires us to increase the limit to 256.</span>
<span class="token attribute attr-name">#![recursion_limit="256"]</span>

<span class="token comment">// Make the WASM binary available.</span>
<span class="token attribute attr-name">#[cfg(feature = "std")]</span>
<span class="token function">include!</span><span class="token punctuation">(</span><span class="token function">concat!</span><span class="token punctuation">(</span><span class="token function">env!</span><span class="token punctuation">(</span><span class="token string">"OUT_DIR"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"/wasm_binary.rs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> rstd<span class="token punctuation">:</span><span class="token punctuation">:</span>prelude<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token comment">//--snip--</span>

<span class="token comment">// A few exports that help ease life for downstream crates.</span>
<span class="token attribute attr-name">#[cfg(any(feature = "std", test))]</span>
<span class="token keyword">pub</span> <span class="token keyword">use</span> sr_primitives<span class="token punctuation">:</span><span class="token punctuation">:</span>BuildStorage<span class="token punctuation">;</span>
<span class="token keyword">pub</span> <span class="token keyword">use</span> balances<span class="token punctuation">:</span><span class="token punctuation">:</span>Call <span class="token keyword">as</span> BalancesCall<span class="token punctuation">;</span>
<span class="token keyword">pub</span> <span class="token keyword">use</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>Gas<span class="token punctuation">;</span>
<span class="token comment">//--snip--</span>
</code></pre>
<p>If you have followed our <a href="tutorials/creating-your-first-substrate-chain.md">other basic tutorials</a>, you may remember that we need to implement a <code>contracts::Trait</code> and also add <code>Contracts: contracts,</code> to our <code>construct_runtime!</code> macro.</p>
<h3><a class="anchor" aria-hidden="true" id="implementing-the-contract-trait"></a><a href="#implementing-the-contract-trait" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementing the Contract Trait</h3>
<p>To figure out what we need to implement, you can take a look at the SRML <a href="https://substrate.dev/rustdocs/master/srml_contracts/trait.Trait.html"><code>contracts::Trait</code> documentation</a> or the <a href="https://github.com/paritytech/substrate/blob/master/srml/contracts/src/lib.rs">Contracts module source code</a>. For our runtime, the implementation will look like this:</p>
<p><strong><code>runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token keyword">impl</span> timestamp<span class="token punctuation">:</span><span class="token punctuation">:</span>Trait <span class="token keyword">for</span> Runtime <span class="token punctuation">{</span>
    <span class="token comment">//--snip--</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>Trait <span class="token keyword">for</span> Runtime <span class="token punctuation">{</span>
    <span class="token keyword">type</span> Currency <span class="token operator">=</span> Balances<span class="token punctuation">;</span>
    <span class="token keyword">type</span> Time <span class="token operator">=</span> Timestamp<span class="token punctuation">;</span>
    <span class="token keyword">type</span> Call <span class="token operator">=</span> Call<span class="token punctuation">;</span>
    <span class="token keyword">type</span> Event <span class="token operator">=</span> Event<span class="token punctuation">;</span>
    <span class="token keyword">type</span> DetermineContractAddress <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>SimpleAddressDeterminator<span class="token operator">&lt;</span>Runtime<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token keyword">type</span> ComputeDispatchFee <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultDispatchFeeComputor<span class="token operator">&lt;</span>Runtime<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token keyword">type</span> TrieIdGenerator <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>TrieIdFromParentCounter<span class="token operator">&lt;</span>Runtime<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token keyword">type</span> GasPayment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">type</span> SignedClaimHandicap <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultSignedClaimHandicap<span class="token punctuation">;</span>
    <span class="token keyword">type</span> TombstoneDeposit <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultTombstoneDeposit<span class="token punctuation">;</span>
    <span class="token keyword">type</span> StorageSizeOffset <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultStorageSizeOffset<span class="token punctuation">;</span>
    <span class="token keyword">type</span> RentByteFee <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultRentByteFee<span class="token punctuation">;</span>
    <span class="token keyword">type</span> RentDepositOffset <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultRentDepositOffset<span class="token punctuation">;</span>
    <span class="token keyword">type</span> SurchargeReward <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultSurchargeReward<span class="token punctuation">;</span>
    <span class="token keyword">type</span> TransferFee <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultTransferFee<span class="token punctuation">;</span>
    <span class="token keyword">type</span> InstantiateBaseFee <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultInstantiationFee<span class="token punctuation">;</span>
    <span class="token keyword">type</span> TransactionBaseFee <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultTransactionBaseFee<span class="token punctuation">;</span>
    <span class="token keyword">type</span> TransactionByteFee <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultTransactionByteFee<span class="token punctuation">;</span>
    <span class="token keyword">type</span> CreationFee <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">type</span> ContractFee <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultContractFee<span class="token punctuation">;</span>
    <span class="token keyword">type</span> CallBaseFee <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultCallBaseFee<span class="token punctuation">;</span>
    <span class="token keyword">type</span> MaxDepth <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultMaxDepth<span class="token punctuation">;</span>
    <span class="token keyword">type</span> MaxValueSize <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultMaxValueSize<span class="token punctuation">;</span>
    <span class="token keyword">type</span> BlockGasLimit <span class="token operator">=</span> contracts<span class="token punctuation">:</span><span class="token punctuation">:</span>DefaultBlockGasLimit<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>To go into a bit more detail here, we see from the documentation that <code>type Currency</code> in the Contracts module needs to be defined and support the requirements of the trait <code>Currency</code></p>
<pre><code class="hljs css language-rust"><span class="token comment">// From the reference documentation, also found in `contracts` module:</span>
<span class="token comment">//   https://github.com/paritytech/substrate/blob/master/srml/contracts/src/lib.rs</span>

<span class="token keyword">type</span> Currency<span class="token punctuation">:</span> Currency<span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token punctuation">:</span><span class="token punctuation">:</span>AccountId<span class="token operator">></span>
</code></pre>
<p>Fortunately, the Balances module implements this type, so we can simply reference <code>Balances</code> to gain access to it.</p>
<p>Similarly, <code>type DetermineContractAddress</code> requires the trait <code>ContractAddressFor</code>. The Contracts module itself implements a type with this trait in <code>contract::SimpleAddressDeterminator</code>, thus we can use that implementation to satisfy our <code>contracts::Trait</code>. At this point, I really recommend you explore the source code of the <a href="https://github.com/paritytech/substrate/blob/master/srml/contract/src/lib.rs">Contracts module</a> if things don't make sense or you want to gain a deeper understanding.</p>
<h3><a class="anchor" aria-hidden="true" id="adding-contract-to-the-construct-runtime-macro"></a><a href="#adding-contract-to-the-construct-runtime-macro" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding Contract to the Construct Runtime Macro</h3>
<p>Next, we need to add the module to the <code>construct_runtime!</code> macro. For this, we need to determine the types that the module exposes so that we can tell the our runtime that they exist. The complete list of possible types can be found in the <a href="https://substrate.dev/rustdocs/master/srml_support/macro.construct_runtime.html"><code>construct_runtime!</code> macro documentation</a>.</p>
<p>If we look at the Contracts module in detail, we know it has:</p>
<ul>
<li>Module <strong>Storage</strong>: Because it uses the <code>decl_storage!</code> macro.</li>
<li>Module <strong>Event</strong>s: Because it uses the <code>decl_event!</code> macro.</li>
<li><strong>Call</strong>able Functions: Because it has dispatchable functions in the <code>decl_module!</code> macro.</li>
<li><strong>Config</strong>uration Values: Because the <code>decl_storage!</code> macro has <code>config()</code> parameters.</li>
<li>The <strong>Module</strong> type from the <code>decl_module!</code> macro.</li>
</ul>
<p>Thus, when we add the module, it will look like this:</p>
<p><strong><code>runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token function">construct_runtime!</span><span class="token punctuation">(</span>
    <span class="token keyword">pub</span> <span class="token keyword">enum</span> Runtime <span class="token keyword">where</span>
        Block <span class="token operator">=</span> Block<span class="token punctuation">,</span>
        NodeBlock <span class="token operator">=</span> opaque<span class="token punctuation">:</span><span class="token punctuation">:</span>Block<span class="token punctuation">,</span>
        UncheckedExtrinsic <span class="token operator">=</span> UncheckedExtrinsic
    <span class="token punctuation">{</span>
        <span class="token comment">//--snip--</span>
        <span class="token comment">// add this line</span>
        Contracts<span class="token punctuation">:</span> contracts<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Note that not all modules will expose all of these runtime types, and some may expose more! You always look at the source code of a module or the documentation of the module to determine which of these types you need to expose.</p>
<h3><a class="anchor" aria-hidden="true" id="adding-runtime-hooks"></a><a href="#adding-runtime-hooks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding Runtime Hooks</h3>
<p>Substrate provides the ability for modules to expose &quot;hooks&quot; where changes in the module can trigger functions in other modules. For example, you could create a module which executes some action every time a new account is created (when it first gains a balance over the <a href="https://substrate.dev/docs/en/overview/glossary#existential-deposit">existential deposit</a>).</p>
<p>In the case of the Contracts module, we actually want a hook when an account runs out of free balance. Because the Contracts module instantiates contracts as &quot;Accounts&quot;, it also needs to know when an account is destroyed so that it can clean up any storage that contract was using. You can find that logic in the Contracts module source code:</p>
<pre><code class="hljs css language-rust"><span class="token comment">// From the reference documentation, also found in `contracts` module:</span>
<span class="token comment">//   https://github.com/paritytech/substrate/blob/master/srml/contracts/src/lib.rs</span>

<span class="token keyword">impl</span><span class="token operator">&lt;</span>T<span class="token punctuation">:</span> Trait<span class="token operator">></span> OnFreeBalanceZero<span class="token operator">&lt;</span>T<span class="token punctuation">:</span><span class="token punctuation">:</span>AccountId<span class="token operator">></span> <span class="token keyword">for</span> Module<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function">on_free_balance_zero</span><span class="token punctuation">(</span>who<span class="token punctuation">:</span> <span class="token operator">&amp;</span>T<span class="token punctuation">:</span><span class="token punctuation">:</span>AccountId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">&lt;</span>CodeHashOf<span class="token operator">&lt;</span>T<span class="token operator">>></span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">remove</span><span class="token punctuation">(</span>who<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>AccountInfoOf<span class="token operator">&lt;</span>T<span class="token operator">>></span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span>who<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token operator">|</span>info<span class="token operator">|</span> child<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">kill_storage</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>info<span class="token punctuation">.</span>trie_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>To enable this, we simply need to add <code>Contracts</code> type that we defined in the <code>construct_runtime!</code> macro to the <code>OnFreeBalanceZero</code> hook provided by the Balances module:</p>
<p><strong><code>runtime/src/lib.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token keyword">impl</span> balances<span class="token punctuation">:</span><span class="token punctuation">:</span>Trait <span class="token keyword">for</span> Runtime <span class="token punctuation">{</span>
    <span class="token comment">/// What to do if an account's free balance gets zeroed.</span>
    <span class="token keyword">type</span> OnFreeBalanceZero <span class="token operator">=</span> <span class="token punctuation">(</span>Contracts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//--snip--</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now, when the Balances module detects that the free balance of an account has reached zero, it calls the <code>on_free_balance_zero</code> function of the Contracts module.</p>
<h2><a class="anchor" aria-hidden="true" id="genesis-configuration"></a><a href="#genesis-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Genesis Configuration</h2>
<p>The last thing we need to do in order to get your node up and running is to establish a genesis configuration for the Contracts module. Not all modules will have a genesis configuration, but if they do, you can use its documentation to learn about it. For example, <a href="https://substrate.dev/rustdocs/master/srml_contracts/struct.GenesisConfig.html"><code>srml_contracts::GenesisConfig</code> documentation</a> describes all the fields you need to define for the Contracts module. This definition is controlled in <code>contracts-chain/src/chain_spec.rs</code>. We need to modify this file to include the <code>ContractsConfig</code> type at the top:</p>
<p><strong><code>src/chain_spec.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token keyword">use</span> contracts_chain_runtime<span class="token punctuation">:</span><span class="token punctuation">:</span>ContractsConfig<span class="token punctuation">;</span>
</code></pre>
<p>Then inside the <code>testnet_genesis</code> function we need to add the contract configuration to the returned <code>GenesisConfig</code> object as followed:</p>
<p><strong><code>src/chain_spec.rs</code></strong></p>
<pre><code class="hljs css language-rust"><span class="token keyword">fn</span> <span class="token function">testnet_genesis</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> GenesisConfig <span class="token punctuation">{</span>
    <span class="token comment">//--snip--</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> contracts_config <span class="token operator">=</span> ContractsConfig <span class="token punctuation">{</span>
        current_schedule<span class="token punctuation">:</span> Default<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        gas_price<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token number">1_000_000_000</span><span class="token punctuation">,</span> <span class="token comment">// MILLICENTS</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// IMPORTANT: this should only be enabled on development chains!</span>
    contracts_config<span class="token punctuation">.</span>current_schedule<span class="token punctuation">.</span>enable_println <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>

    GenesisConfig <span class="token punctuation">{</span>
        <span class="token comment">//--snip--</span>
        <span class="token comment">// add this line</span>
        contracts<span class="token punctuation">:</span> <span class="token function">Some</span><span class="token punctuation">(</span>contracts_config<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Note that you can tweak these numbers to your needs, but these are the values set at the <a href="https://github.com/paritytech/substrate/blob/master/node/cli/src/chain_spec.rs">genesis configuration of the main Substrate node</a>.</p>
<p>Now you are ready to compile and run your contract-capable node. We first need to purge the chain to remove the old runtime logic and have the genesis configuration initialized for the Contracts module. It is possible to upgrade the chain without purging it but it will remain out of scope for this tutorial.</p>
<pre><code class="hljs css language-bash">cargo run --release -- purge-chain --dev
cargo run --release -- --dev
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="adding-other-srml-modules"></a><a href="#adding-other-srml-modules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding Other SRML Modules</h2>
<p>In this guide, we walked through specifically how to import the Contracts module, but as mentioned in the beginning of this guide, each module will be a little different. Have no fear, you can always refer to the <a href="https://github.com/paritytech/substrate/blob/master/node/runtime/">&quot;main&quot; Substrate node runtime</a> which includes nearly every module in the SRML.</p>
<p>In the <code>Cargo.toml</code> file of the Substrate node runtime, you will see an example of how to import each of the different modules, and in the <code>lib.rs</code> file you will find how to add each module to your runtime. You can basically copy what was done there to your own runtime.</p>
<h2><a class="anchor" aria-hidden="true" id="后续步骤"></a><a href="#后续步骤" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>后续步骤</h2>
<h3><a class="anchor" aria-hidden="true" id="learn-more"></a><a href="#learn-more" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Learn More</h3>
<ul>
<li><a href="tutorials/creating-a-runtime-module">A minimalist tutorial on writing your runtime module in its own package</a>.</li>
<li>With your node now capable of running smart contracts, go learn to write your first smart contract in <a href="https://substrate.dev/substrate-contracts-workshop">Substrate Contracts workshop</a>.</li>
<li>To learn more about writing your own runtime with a front end, we have a <a href="https://substrate.dev/substrate-collectables-workshop">Substrate Collectables Workshop</a> for building an end-to-end application.</li>
<li>For more information about runtime development tips and patterns, please refer to our <a href="https://substrate.dev/recipes/">Substrate Recipes</a>.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="references"></a><a href="#references" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References</h3>
<ul>
<li><a href="https://crates.parity.io/srml_contracts/index.html">SRML <code>Contracts</code> module API</a></li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#importing-a-module-crate">Importing a Module Crate</a><ul class="toc-headings"><li><a href="#crate-features">Crate Features</a></li><li><a href="#importing-the-contracts-module-crate">Importing the Contracts Module Crate</a></li></ul></li><li><a href="#adding-the-contracts-module">Adding the Contracts Module</a><ul class="toc-headings"><li><a href="#implementing-the-contract-trait">Implementing the Contract Trait</a></li><li><a href="#adding-contract-to-the-construct-runtime-macro">Adding Contract to the Construct Runtime Macro</a></li><li><a href="#adding-runtime-hooks">Adding Runtime Hooks</a></li></ul></li><li><a href="#genesis-configuration">Genesis Configuration</a></li><li><a href="#adding-other-srml-modules">Adding Other SRML Modules</a></li><li><a href="#后续步骤">后续步骤</a><ul class="toc-headings"><li><a href="#learn-more">Learn More</a></li><li><a href="#references">References</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><div><style>
#blast {
  position: fixed;
  width: 100%;
  bottom: 0;
  height: 50px;
  background-image: url(/img/bg-sub01.svg); background-size: cover; background-position: right 0px bottom 500px;;
  color: #18FFB2;
  z-index: 99999;
  text-align: center;
  background-color: #000028;
  transition: background-color 0.2s;
}
#blast:hover {
  background-color: #E91E63;
}

#blast h2 {
  margin: 0;
  line-height: 50px;
}

#blast a {
  display: block;
  color: #18FFB2;
  text-decoration: underline;
  mix-blend-mode: lighten;
}

#blast img {
  max-height: 50px;
}

body {
  margin-bottom: 50px;
}
</style><section id="blast"><a href="https://sub0.parity.io" target="_blank"><img src="/img/sub0-blast.png" class="img-fluid"/></a></section></div><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Substrate-logo.svg" alt="Substrate Developer Hub (@5517ab14)" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/zh-CN/getting-started">Getting Started</a><a href="/zh-CN/tutorials">Tutorials</a><a href="/rustdocs/v1.0/">Reference Docs</a><a href="/recipes/">Recipes</a></div><div><h5>Community</h5><a href="/zh-CN/videos">Videos</a><a href="/zh-CN/seminar">Substrate Seminar</a><a href="http://stackoverflow.com/questions/tagged/substrate" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://riot.im/app/#/room/!HzySYSaIhtyWrwiwEV:matrix.org">Riot Chat</a><a href="https://twitter.com/ParityTech" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.meetup.com/parity/" target="_blank" rel="noreferrer noopener">Events</a></div><div><h5>More</h5><a href="https://www.parity.io/blog/">Blog</a><a href="https://github.com/paritytech/substrate">Substrate GitHub</a><a href="https://github.com/substrate-developer-hub/">Developer Hub GitHub</a><a href="https://www.parity.io/privacy/">Privacy Policy</a><a href="#" id="cookie-settings">Cookie Settings<script>
              var cookieSettings = document.getElementById('cookie-settings');
              cookieSettings.onclick = function() {
                return klaro.show();
              };
              </script></a></div></section><section class="copyright">Copyright © 2019 Parity Technologies</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '5cd09916f4ba4c283b2d45ee7386fc34',
                indexName: 'substrate',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:zh-CN"]}
              });
            </script></body></html>