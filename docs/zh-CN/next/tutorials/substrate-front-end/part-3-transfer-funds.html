<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Part 3 - Transfer funds · Substrate Developer Hub (@5517ab14)</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Now that we have all of our account balances displayed, let&#x27;s get them moving. In this part, we will create a &lt;code&gt;Transfer&lt;/code&gt; React component that will allow sending funds from the accounts for which we own the private key to any other account. We will have a &amp;quot;from&amp;quot; field, a &amp;quot;to&amp;quot; field, and a button to transfer.&lt;/p&gt;
"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="Part 3 - Transfer funds · Substrate Developer Hub (@5517ab14)"/><meta property="og:type" content="website"/><meta property="og:url" content="https://substrate-developer-hub.github.io//"/><meta property="og:description" content="&lt;p&gt;Now that we have all of our account balances displayed, let&#x27;s get them moving. In this part, we will create a &lt;code&gt;Transfer&lt;/code&gt; React component that will allow sending funds from the accounts for which we own the private key to any other account. We will have a &amp;quot;from&amp;quot; field, a &amp;quot;to&amp;quot; field, and a button to transfer.&lt;/p&gt;
"/><meta property="og:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://substrate-developer-hub.github.io/img/substrate-dev-hub-card.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/load.js"></script><script type="text/javascript" src="/js/config.js" defer=""></script><script type="text/javascript" src="/js/klaro.min.js" defer=""></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-CN"><img class="logo" src="/img/Substrate-logo.svg" alt="Substrate Developer Hub (@5517ab14)"/><h2 class="headerTitleWithLogo">Substrate Developer Hub (@5517ab14)</h2></a><a href="/zh-CN/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/zh-CN/docs" target="_self">文档</a></li><li class=""><a href="/recipes/" target="_self">Recipes</a></li><li class=""><a href="/zh-CN/tutorials" target="_self">教程</a></li><li class=""><a href="/zh-CN/community" target="_self">社区</a></li><li class=""><a href="https://github.com/paritytech/substrate" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/next/tutorials/substrate-front-end/part-3-transfer-funds">English</a></li><li><a href="/docs/ru/next/tutorials/substrate-front-end/part-3-transfer-funds">Русский</a></li><li><a href="https://crowdin.com/project/substrate-developer-hub" target="_blank" rel="noreferrer noopener">参与翻译</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/substrate-developer-hub/zh-CN" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">Part 3 - Transfer funds</h1></header><article><div><span><p>Now that we have all of our account balances displayed, let's get them moving. In this part, we will create a <code>Transfer</code> React component that will allow sending funds from the accounts for which we own the private key to any other account. We will have a &quot;from&quot; field, a &quot;to&quot; field, and a button to transfer.</p>
<p>In this part we will use the <a href="https://polkadot.js.org/api/METHODS_EXTRINSICS.html"><code>api.tx</code></a> method to submit a transaction for the <code>balances</code> blockchain module.</p>
<h2><a class="anchor" aria-hidden="true" id="31-transfer-funds"></a><a href="#31-transfer-funds" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3.1 Transfer funds</h2>
<p>Because you can only send funds from your own accounts, the &quot;from&quot; field will be a dropdown. The receiver of our funds can be any valid address though.</p>
<p>In this component, we don't need to fetch any data from the <code>api</code>, so there is no hook, however, we will use the <code>api</code> to do the transfer. Just like for <code>Balances</code> we will pass the <code>api</code> and <code>keyring</code> to the props. We will have only one state variable, an object containing the form information to be submitted as we click the <em>Send</em> button.</p>
<p>To generate the options from the dropdown of our account's <code>keyringOptions</code>, we will simply iterate from the <code>keyring.getPairs()</code>.</p>
<pre><code class="hljs css language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Transfer</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> api<span class="token punctuation">,</span> keyring <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>status<span class="token punctuation">,</span> setStatus<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
    addressFrom<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    addressTo<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    amount<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>formState<span class="token punctuation">,</span> setFormState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// get the list of accounts we possess the private key for</span>
  <span class="token keyword">const</span> keyringOptions <span class="token operator">=</span> keyring<span class="token punctuation">.</span><span class="token function">getPairs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">account</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    key<span class="token punctuation">:</span> account<span class="token punctuation">.</span>address<span class="token punctuation">,</span>
    value<span class="token punctuation">:</span> account<span class="token punctuation">.</span>address<span class="token punctuation">,</span>
    text<span class="token punctuation">:</span> account<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setFormState</span><span class="token punctuation">(</span><span class="token parameter">formState</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>formState<span class="token punctuation">,</span>
        <span class="token punctuation">[</span>data<span class="token punctuation">.</span>state<span class="token punctuation">]</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>value
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>We will then create our function to actually submit the form. To do so we need to create the transaction, then sign it with our private key, and finally send it. The <code>api</code> provides all we need here again, with <code>api.tx.balances</code> and the <code>transfer</code> and <code>signAndSend</code> methods. The latter takes the key pair as the first parameter and a callback as the second parameter.</p>
<p>The <code>status</code> of the transaction is passed to the callback function. We will use it to see if our transaction is executed successfully. In the example below, we will show our users if the transaction was successfully finalized using the <code>isFinalized</code> status value. If it was successfullu executed, we're showing at which block it was finalized.</p>
<pre><code class="hljs css language-js"><span class="token keyword">const</span> <span class="token function-variable function">makeTransfer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> addressTo<span class="token punctuation">,</span> addressFrom<span class="token punctuation">,</span> amount <span class="token punctuation">}</span> <span class="token operator">=</span> formState<span class="token punctuation">;</span>
    <span class="token keyword">const</span> fromPair <span class="token operator">=</span> keyring<span class="token punctuation">.</span><span class="token function">getPair</span><span class="token punctuation">(</span>addressFrom<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token string">'Sending...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    api<span class="token punctuation">.</span>tx<span class="token punctuation">.</span>balances
    <span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>addressTo<span class="token punctuation">,</span> amount<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">signAndSend</span><span class="token punctuation">(</span>fromPair<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> status <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>status<span class="token punctuation">.</span>isFinalized<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Completed at block hash #</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>status<span class="token punctuation">.</span>asFinalized<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Current transfer status: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>status<span class="token punctuation">.</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token string">':( transaction failed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'ERROR:'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>This is it, nothing particularly crazy right? Similar to the <code>Balances</code> component, we need to import it in <code>Apps.js</code> and say where it should be rendered.</p>
<pre><code class="hljs css language-js"><span class="token comment">// at the top of the file</span>
<span class="token keyword">import</span> Transfer <span class="token keyword">from</span> <span class="token string">'./Transfer'</span><span class="token punctuation">;</span>

<span class="token comment">// right after our Balances component</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Transfer</span></span>
    <span class="token attr-name">api</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>api<span class="token punctuation">}</span></span>
    <span class="token attr-name">keyring</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>keyring<span class="token punctuation">}</span></span>
<span class="token punctuation">/></span></span>
</code></pre>
<p>You can get the working version of this code by visiting the <code>part-3-1</code> directory:</p>
<pre><code class="hljs css language-bash"><span class="token function">cd</span> part-3-1<span class="token punctuation">;</span>
<span class="token function">yarn</span><span class="token punctuation">;</span>
<span class="token function">yarn</span> start<span class="token punctuation">;</span>
</code></pre>
<p>If you run this example, you will find our <code>Transfer</code> component below the Balance table.</p>
<p><img src="/docs/assets/tutorials/substrate-front-end/part-3-1.jpg" alt="All balances"></p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#31-transfer-funds">3.1 Transfer funds</a></li></ul></nav></div><footer class="nav-footer" id="footer"><div><style>
#blast {
  position: fixed;
  width: 100%;
  bottom: 0;
  height: 50px;
  background-image: url(/img/bg-sub01.svg); background-size: cover; background-position: right 0px bottom 500px;;
  color: #18FFB2;
  z-index: 99999;
  text-align: center;
  background-color: #000028;
  transition: background-color 0.2s;
}
#blast:hover {
  background-color: #E91E63;
}

#blast h2 {
  margin: 0;
  line-height: 50px;
}

#blast a {
  display: block;
  color: #18FFB2;
  text-decoration: underline;
  mix-blend-mode: lighten;
}

#blast img {
  max-height: 50px;
}

body {
  margin-bottom: 50px;
}
</style><section id="blast"><a href="https://sub0.parity.io" target="_blank"><img src="/img/sub0-blast.png" class="img-fluid"/></a></section></div><section class="sitemap"><a href="/" class="nav-home"><img src="/img/Substrate-logo.svg" alt="Substrate Developer Hub (@5517ab14)" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/zh-CN/getting-started">Getting Started</a><a href="/zh-CN/tutorials">Tutorials</a><a href="/rustdocs/v1.0/">Reference Docs</a><a href="/recipes/">Recipes</a></div><div><h5>Community</h5><a href="/zh-CN/videos">Videos</a><a href="/zh-CN/seminar">Substrate Seminar</a><a href="http://stackoverflow.com/questions/tagged/substrate" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://riot.im/app/#/room/!HzySYSaIhtyWrwiwEV:matrix.org">Riot Chat</a><a href="https://twitter.com/ParityTech" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.meetup.com/parity/" target="_blank" rel="noreferrer noopener">Events</a></div><div><h5>More</h5><a href="https://www.parity.io/blog/">Blog</a><a href="https://github.com/paritytech/substrate">Substrate GitHub</a><a href="https://github.com/substrate-developer-hub/">Developer Hub GitHub</a><a href="https://www.parity.io/privacy/">Privacy Policy</a><a href="#" id="cookie-settings">Cookie Settings<script>
              var cookieSettings = document.getElementById('cookie-settings');
              cookieSettings.onclick = function() {
                return klaro.show();
              };
              </script></a></div></section><section class="copyright">Copyright © 2019 Parity Technologies</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '5cd09916f4ba4c283b2d45ee7386fc34',
                indexName: 'substrate',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:zh-CN"]}
              });
            </script></body></html>